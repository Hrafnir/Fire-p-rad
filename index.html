<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spillpakke: Fire p친 rad & 21 Pinner</title>
    <style>
        :root {
            /* Felles variabler */
            --bg-color: #2c3e50;
            --panel-bg: #34495e;
            --text-color: #ecf0f1;
            --highlight: #3498db;
            --shadow: 0 4px 6px rgba(0,0,0,0.3);
            
            /* Fire p친 rad farger */
            --c4-p1: #e74c3c; /* R칮d */
            --c4-p2: #f1c40f; /* Gul */
            
            /* 21 Pinner farger */
            --stick-color: #e67e22; /* Treverk-farge */
            --stick-danger: #c0392b; /* Farlig pinne */
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- FANE-SYSTEM --- */
        .tabs {
            display: flex;
            margin-top: 20px;
            margin-bottom: 20px;
            background: var(--panel-bg);
            padding: 5px;
            border-radius: 50px;
            box-shadow: var(--shadow);
        }

        .tab-btn {
            background: none;
            border: none;
            color: var(--text-color);
            padding: 10px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 40px;
            transition: background 0.3s;
        }

        .tab-btn.active {
            background-color: var(--highlight);
            font-weight: bold;
        }

        .game-container {
            display: none; /* Skjuler spill som ikke er valgt */
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 600px;
            animation: fadeIn 0.5s;
        }

        .game-container.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 { margin-top: 0; }
        .status-box {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: bold;
            min-height: 1.5em;
        }

        /* Felles knappestil */
        .action-btn {
            margin: 10px;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: transform 0.1s;
            color: white;
            background-color: var(--highlight);
        }
        .action-btn:hover { transform: scale(1.05); }
        .action-btn:active { transform: scale(0.95); }
        .reset-btn { background-color: #27ae60; margin-top: 20px;}

        /* --- SPILL 1: FIRE P칀 RAD STILER --- */
        #c4-board {
            background-color: var(--panel-bg);
            padding: 15px;
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: grid;
            grid-template-columns: repeat(7, 50px);
            grid-template-rows: repeat(6, 50px);
            gap: 8px;
        }
        .c4-slot {
            width: 50px;
            height: 50px;
            background-color: #ecf0f1;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
        }
        .c4-p1 { background-color: var(--c4-p1); }
        .c4-p2 { background-color: var(--c4-p2); }
        
        /* --- SPILL 2: 21 PINNER STILER --- */
        #stick-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            min-height: 150px;
            perspective: 1000px;
        }

        .stick {
            width: 15px;
            height: 120px;
            background: linear-gradient(90deg, #d35400, var(--stick-color) 40%, #d35400);
            border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            transition: all 0.4s ease;
        }

        /* Den siste pinnen (tap-pinnen) */
        .stick.danger {
            background: linear-gradient(90deg, #7f0000, var(--stick-danger) 40%, #7f0000);
            border: 1px solid #e74c3c;
        }

        .stick.removed {
            transform: translateY(-50px) rotate(20deg);
            opacity: 0;
            pointer-events: none;
        }

        .stick-controls {
            display: flex;
            gap: 10px;
        }
        
        .stick-controls button:disabled {
            background-color: #7f8c8d;
            cursor: not-allowed;
            opacity: 0.6;
        }

    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('game1')">Fire p친 rad</button>
        <button class="tab-btn" onclick="switchTab('game2')">21 Pinner</button>
    </div>

    <div id="game1" class="game-container active">
        <h2>Fire p친 rad</h2>
        <div id="c4-status" class="status-box">Spiller 1 (R칮d) sin tur</div>
        <div id="c4-board"></div>
        <button class="action-btn reset-btn" onclick="initConnect4()">Nytt parti</button>
    </div>

    <div id="game2" class="game-container">
        <h2>Ikke ta den siste pinnen!</h2>
        <div id="stick-status" class="status-box">Spiller 1 sin tur - Det er 21 pinner igjen</div>
        
        <div id="stick-area">
            </div>

        <div class="stick-controls">
            <button class="action-btn" id="btn-take-1" onclick="takeSticks(1)">Ta 1</button>
            <button class="action-btn" id="btn-take-2" onclick="takeSticks(2)">Ta 2</button>
            <button class="action-btn" id="btn-take-3" onclick="takeSticks(3)">Ta 3</button>
        </div>

        <button class="action-btn reset-btn" onclick="initSticksGame()">Start p친 nytt</button>
    </div>

<script>
    // --- FANE LOGIKK ---
    function switchTab(tabId) {
        // Skjul alle spill
        document.querySelectorAll('.game-container').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

        // Vis valgt spill
        document.getElementById(tabId).classList.add('active');
        
        // Marker knappen
        const btnIndex = tabId === 'game1' ? 0 : 1;
        document.querySelectorAll('.tab-btn')[btnIndex].classList.add('active');
    }

    /* =========================================
       LOGIKK FOR SPILL 1: FIRE P칀 RAD
       ========================================= */
    const C4_ROWS = 6;
    const C4_COLS = 7;
    let c4_board = [];
    let c4_currentPlayer = 1;
    let c4_active = true;

    function initConnect4() {
        c4_board = [];
        c4_active = true;
        c4_currentPlayer = 1;
        document.getElementById('c4-status').innerText = "Spiller 1 (R칮d) sin tur";
        const boardEl = document.getElementById('c4-board');
        boardEl.innerHTML = '';

        for (let r = 0; r < C4_ROWS; r++) {
            let row = [];
            for (let c = 0; c < C4_COLS; c++) {
                row.push(0);
                const slot = document.createElement('div');
                slot.classList.add('c4-slot');
                slot.onclick = () => dropPiece(c);
                boardEl.appendChild(slot);
            }
            c4_board.push(row);
        }
    }

    function dropPiece(col) {
        if (!c4_active) return;
        for (let r = C4_ROWS - 1; r >= 0; r--) {
            if (c4_board[r][col] === 0) {
                c4_board[r][col] = c4_currentPlayer;
                const slots = document.querySelectorAll('.c4-slot');
                slots[r * C4_COLS + col].classList.add(c4_currentPlayer === 1 ? 'c4-p1' : 'c4-p2');
                
                if (checkConnect4Win(r, col)) {
                    document.getElementById('c4-status').innerText = `Spiller ${c4_currentPlayer} VANT! 游꿀`;
                    c4_active = false;
                } else {
                    c4_currentPlayer = c4_currentPlayer === 1 ? 2 : 1;
                    document.getElementById('c4-status').innerText = `Spiller ${c4_currentPlayer} (${c4_currentPlayer === 1 ? 'R칮d' : 'Gul'}) sin tur`;
                }
                return;
            }
        }
    }

    function checkConnect4Win(r, c) {
        const p = c4_board[r][c];
        const dirs = [[0,1], [1,0], [1,1], [1,-1]];
        for (let [dr, dc] of dirs) {
            let count = 1;
            for (let i=1; i<4; i++) if(valid(r+dr*i, c+dc*i, p)) count++; else break;
            for (let i=1; i<4; i++) if(valid(r-dr*i, c-dc*i, p)) count++; else break;
            if (count >= 4) return true;
        }
        return false;
    }
    function valid(r, c, p) {
        return r>=0 && r<C4_ROWS && c>=0 && c<C4_COLS && c4_board[r][c] === p;
    }

    /* =========================================
       LOGIKK FOR SPILL 2: 21 PINNER (NIM)
       ========================================= */
    let sticksLeft = 21;
    let stickCurrentPlayer = 1;
    let stickGameActive = true;

    function initSticksGame() {
        sticksLeft = 21;
        stickCurrentPlayer = 1;
        stickGameActive = true;
        updateStickStatus();
        renderSticks();
        toggleButtons(true);
    }

    function renderSticks() {
        const container = document.getElementById('stick-area');
        container.innerHTML = '';
        
        // Vi tegner pinnene. Pinne nr 1 (indeks 0) er den "farlige".
        for (let i = 0; i < sticksLeft; i++) {
            const stick = document.createElement('div');
            stick.classList.add('stick');
            
            // Hvis det er den siste pinnen som st친r igjen (visuelt den f칮rste i rekka)
            if (i === 0) {
                stick.classList.add('danger');
                stick.title = "IKKE TA DENNE!";
            }
            container.appendChild(stick);
        }
    }

    function takeSticks(num) {
        if (!stickGameActive) return;
        if (num > sticksLeft) return; // Sikkerhet

        // Fjern pinner visuelt f칮rst (animasjon)
        const allSticks = document.querySelectorAll('.stick');
        // Vi fjerner fra slutten av listen (h칮yre side)
        for (let i = 0; i < num; i++) {
            const indexToRemove = allSticks.length - 1 - i;
            if (allSticks[indexToRemove]) {
                allSticks[indexToRemove].classList.add('removed');
            }
        }

        // Vent litt s친 animasjonen synes f칮r vi oppdaterer logikken
        setTimeout(() => {
            sticksLeft -= num;
            
            // Sjekk tap/vinn
            if (sticksLeft <= 0) {
                // Den som tok den siste tapte
                document.getElementById('stick-status').innerText = `Spiller ${stickCurrentPlayer} tok den siste pinnen og TAPTE! 游땸`;
                stickGameActive = false;
                toggleButtons(false);
                renderSticks(); // Oppdater visuelt for 친 fjerne dem helt
            } else {
                // Bytt spiller
                stickCurrentPlayer = stickCurrentPlayer === 1 ? 2 : 1;
                updateStickStatus();
                renderSticks(); // Tegn opp p친 nytt med riktig antall
                
                // Deaktiver knapper hvis det er f친 pinner igjen
                checkButtonAvailability();
            }
        }, 300);
    }

    function updateStickStatus() {
        document.getElementById('stick-status').innerText = 
            `Spiller ${stickCurrentPlayer} sin tur. Pinner igjen: ${sticksLeft}`;
    }

    function toggleButtons(enable) {
        document.getElementById('btn-take-1').disabled = !enable;
        document.getElementById('btn-take-2').disabled = !enable;
        document.getElementById('btn-take-3').disabled = !enable;
    }

    function checkButtonAvailability() {
        // Hvis det er f.eks. 2 pinner igjen, kan man ikke ta 3.
        // Men i dette spillet m친 man ta minst 1.
        // Hvis det er 2 igjen (1 vanlig + 1 farlig), kan man teknisk sett ta 2 og tape.
        document.getElementById('btn-take-2').disabled = (sticksLeft < 2);
        document.getElementById('btn-take-3').disabled = (sticksLeft < 3);
    }

    // Start opp begge spillene ved lasting
    initConnect4();
    initSticksGame();

</script>

</body>
</html>
